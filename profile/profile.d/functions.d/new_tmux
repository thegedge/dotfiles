typeset -a search_dirs

if [[ -e "$CODE_DIR" ]]; then
  search_dirs+=("$CODE_DIR")
fi

if [[ -e "$GOPATH/src" ]]; then
  search_dirs+=("$GOPATH/src")
fi

local dir=$(find ${search_dirs[@]} -name "$1" -type d -maxdepth 3 -print -quit)
if [[ -n "${dir}" ]]; then
  tmux new-session -ADs "${1##*/}" -c "${dir}"
else
  tmux new-session -ADs "${1##*/}" -c "$1"
fi
